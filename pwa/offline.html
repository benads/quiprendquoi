<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Qui prend quoi - Hors ligne</title>
	</head>
	<body>
		<h1>Oops !</h1>
		<h2>Vous êtes hors ligne</h2>
		<p>Vous pouvez quand meme acceder à vos événements</p>
		<div id="listItem" style="display:flex;flex-direction:column"></div>
		<script>
			caches.open("parties").then(cache =>
				cache.keys().then(keys =>
					keys.forEach(key => {
						const name = localStorage.getItem(key.url);
						if (name) {
							const $link = document.createElement("a");
							$link.href = key.url;
							$link.innerHTML = name;
							let listItem = document.querySelector("#listItem");
							listItem.appendChild($link);
						}
					}),
				),
			);
		</script>
	</body>
</html>
